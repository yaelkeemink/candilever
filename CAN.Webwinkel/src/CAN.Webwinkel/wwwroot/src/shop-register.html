<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/gold-phone-input/gold-phone-input.html">
<link rel="import" href="../bower_components/iron-form/iron-form.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/gold-email-input/gold-email-input.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">

<dom-module id="shop-register">

    <template>

    <style is="custom-form-style">
  paper-button.indigo {
    background-color: var(--paper-indigo-500);
    color: white;
    --paper-button-raised-keyboard-focus: {
      background-color: var(--paper-pink-a200) !important;
      color: white !important;
    };
  }

  button.no-style {
    -webkit-appearance: none;
    border: 0;
    padding: 0;
    background: transparent;
  }
    </style>
    <!--<app-route
        route="[[route]]"
        pattern="/:register"
        data="{{routeData}}"></app-route>-->


    <form is="iron-form" id="form">
        <paper-input name="voornaam" label="Voornaam" value={{voornaam}}></paper-input>
        <paper-input name="tussenvoegsel" label="Tussenvoegsel" value={{tussenvoegsel}}></paper-input>
        <paper-input name="achternaam" label="Achternaam" value={{achternaam}}></paper-input>
        <paper-input name="postcode" label="Postcode" value={{postcode}}></paper-input>
        <paper-input label="Telefoonnummer" name="telefoonnummer" value={{telefoonnummer}}></paper-input>
        <gold-email-input name="email" value={{email}}></gold-email-input>
        <paper-input name="huisnummer" label="Huisnummer" value={{huisnummer}}></paper-input>
        <paper-input name="straatnaam" label="Straatnaam" value={{straat}}></paper-input>
        <paper-dropdown-menu label="Land">
          <paper-menu attr-for-selected="value" selected="{{land}}" class="dropdown-content">
            <paper-item value="0">Nederland</paper-item>
            <paper-item value="50">BelgiÃ«</paper-item>
          </paper-menu>
        </paper-dropdown-menu>
    <paper-button raised class="indigo" on-tap="_submit">Registreer</paper-button>
    </form>

    <iron-ajax id="AjaxPost"
    url="/api/Home/Register"
    method="POST"
    content-type="application/json"
    handle-as="json"
    on-response="_handleAjaxResponse"
    on-error="_handleAjaxPostError"></iron-ajax>
</template>
    <script>

Polymer({
            is: 'shop-register',

            properties: {
              voornaam: {
                type: String
              },
              tussenvoegsel: {
                type: String
              },
              achternaam: {
                type: String
              },
              postcode: {
                type: String
              },
              telefoonnummer: {
                type: Number
              },
              email: {
                type: String
              },
              huisnummer: {
                type: String
              },
              straat: {
                type: String
              },
              land: {
                type: Number
              }
            },
            
            _submit: function _submit(event) {
              var body = '{ "voornaam":"' + this.voornaam + '","achternaam":"'+ this.achternaam+'","tussenvoegsels":"'+ this.tussenvoegsel +'","postcode":"'+ this.postcode +'","telefoonnummer":"'+ this.telefoonnummer +'","email":"'+ this.email+'","huisnummer":"' + this.huisnummer +'","adres": "'+ this.straat + '","land":"' + this.land + '"}';

              this.$.AjaxPost.body = body;
              console.log(body);

              this.$.AjaxPost.generateRequest();
              console.log("JSON is gepost naar de controller")
            },

            _handleAjaxResponse: function (data){
              console.log(data.detail.response)
            }
        })
        

        

    </script>
</dom-module>